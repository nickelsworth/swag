<html>
<head><title> "Display scaleable LCD numbers" by LEOPOLDO SALVO MASSIEU</title><link rel="STYLESHEET" type="text/css" href="../swagsource.css"></head>
<body><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0240.PAS">Original</a><b>]</b></p><!--StartFragment--><pre><code>
<font color="#008000"><i>{ SWAG NOTE :  Other unit and Demos at BOTTOM ! }

{
LCD.PAS
Written by Leopoldo Salvo Massieu, april 92. e-mail a900040@zipi.fi.upm.es
Freeware.

Written for Borland Pascal 7.0.

This units implement scalable lcd displays for numerical output in graphics mode.
Works in any graphic mode. Works in real and protected mode applications.

Restrictions: Digits must be at most 254 pixels wide horizontally
                (the digit width is equal to the width of the lcd display divided into the number of digits)
}

</i></font><font color="#FF0000"><b>Unit </b></font>LCD<font color="#000080">;
</font><font color="#FF0000"><b>Interface
 Uses </b></font>Graph<font color="#000080">;
     </font><font color="#008000"><i>{Uses getmaxx,getmaxy,setcolor,putpixel,bar}

 </i></font><font color="#FF0000"><b>Type </b></font>PDisplay <font color="#000080">= ^</font>Display<font color="#000080">;
      </font>Display <font color="#000080">= </font><font color="#FF0000"><b>object
                   private
                     </b></font>xi<font color="#000080">,</font>yi<font color="#000080">,</font>xf<font color="#000080">,</font>yf <font color="#000080">: </font>integer<font color="#000080">;
                     </font>num_cars <font color="#000080">: </font>byte<font color="#000080">;
                     </font>col_on<font color="#000080">, </font>col_off <font color="#000080">: </font>word<font color="#000080">;
                     </font>graficos <font color="#000080">: </font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">9</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>pointer<font color="#000080">;
                     </font>tamano_graficos <font color="#000080">: </font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">9</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>word<font color="#000080">;
                     </font>buffer <font color="#000080">: </font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">40</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
                     </font>desbordado <font color="#000080">: </font>boolean<font color="#000080">;
                   </font><font color="#FF0000"><b>public

                     constructor </b></font>init <font color="#000080">(</font>x1<font color="#000080">,</font>y1<font color="#000080">,</font>x2<font color="#000080">,</font>y2<font color="#000080">:</font>integer<font color="#000080">;</font>num_digits<font color="#000080">:</font>byte<font color="#000080">;
                                     </font>forecolor<font color="#000080">,</font>backcolor<font color="#000080">:</font>word<font color="#000080">);
   </font><font color="#008000"><i>{coordinates of top-left and bottom-right corners, number of digits in the
    display (without counting the decimal point), and color of foreground and
    background}

                     </i></font><font color="#FF0000"><b>destructor </b></font>done<font color="#000080">;
   </font><font color="#008000"><i>{Releases memory}

                     </i></font><font color="#FF0000"><b>procedure </b></font>display_string <font color="#000080">(</font>cadena_num<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">);
   </font><font color="#008000"><i>{Writes a string (only numbers will be displayed)}

                     </i></font><font color="#FF0000"><b>procedure </b></font>display_real <font color="#000080">(</font>ndecimals<font color="#000080">: </font>integer<font color="#000080">; </font>r<font color="#000080">:</font>real<font color="#000080">);
   </font><font color="#008000"><i>{Writes a real with n decimals (use 0 for integers)}

                     </i></font><font color="#FF0000"><b>procedure </b></font>redraw<font color="#000080">;
                </font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Implementation
  Const
    </b></font>palotes_x_digito <font color="#000080">= </font><font color="#800000">9</font><font color="#000080">; </font><font color="#008000"><i>{7 segments for each digit, plus the decimal point and an overflow point at the top-left}
    </i></font>no_error <font color="#000080">=  </font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>Type
    </b></font>st40 <font color="#000080">= </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">40</font><font color="#000080">];
    </font>digi_font <font color="#000080">= (</font>cero<font color="#000080">,</font>uno<font color="#000080">,</font>dos<font color="#000080">,</font>tres<font color="#000080">,</font>cuatro<font color="#000080">,</font>cinco<font color="#000080">,</font>seis<font color="#000080">,</font>siete<font color="#000080">,</font>ocho<font color="#000080">,</font>nueve<font color="#000080">,</font>e<font color="#000080">,</font>desbordamiento<font color="#000080">,</font>espacio<font color="#000080">,</font>menos<font color="#000080">,</font>punto<font color="#000080">);
              </font><font color="#008000"><i>{these are all the characters that can be displayed ['0'..'9','E','-',' ', '.'].
               The '+' caracter is displayed as an space.}
    </i></font>digi_palo <font color="#000080">= </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">6</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>pointtype<font color="#000080">;
              </font><font color="#008000"><i>{each segment has at most 6 extremes (end points)}
    </i></font>digi_data <font color="#000080">= </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font>palotes_x_digito<font color="#000080">] </font><font color="#FF0000"><b>of record
                                               </b></font>data<font color="#000080">:</font>digi_palo<font color="#000080">;
                                               </font>longitud<font color="#000080">: </font>byte<font color="#000080">;
                                              </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
              </font><font color="#008000"><i>{number of extremes and the extremes themselves for all segments}
    </i></font>digi_masc <font color="#000080">= </font><font color="#FF0000"><b>record              </b></font><font color="#008000"><i>{esta es una forma de guardar los 'trozos' de digito en}
                 </i></font>esq_si <font color="#000080">: </font>pointtype<font color="#000080">;</font><font color="#008000"><i>{memoria sin que ocupe demasiado espacio en memoria}
                 </i></font>num_lin<font color="#000080">: </font>byte<font color="#000080">;
                 </font>datos <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">256</font><font color="#000080">] </font><font color="#FF0000"><b>of record
                                           </b></font>p<font color="#000080">,</font>u<font color="#000080">:</font>byte<font color="#000080">;
                                          </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
                </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
              </font><font color="#008000"><i>{structure to keep the scaled segments in memory (only necessary mem allocated, tipycally &lt;256)}
    </i></font>digi_memo <font color="#000080">= </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font>palotes_x_digito<font color="#000080">] </font><font color="#FF0000"><b>of </b></font><font color="#000080">^</font>digi_masc<font color="#000080">;
    </font>digi_st   <font color="#000080">= </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">40</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>digi_font<font color="#000080">;
  </font><font color="#FF0000"><b>Const
    </b></font><font color="#008000"><i>{this codes what segments must be lighted for each character}
    </i></font>caracteres <font color="#000080">: </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font>cero<font color="#000080">..</font>punto<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">..</font>palotes_x_digito<font color="#000080">] </font><font color="#FF0000"><b>of </b></font>boolean <font color="#000080">=
                  ((</font>true<font color="#000080">,</font>true<font color="#000080">,</font>true<font color="#000080">,</font>false<font color="#000080">,</font>true<font color="#000080">,</font>true<font color="#000080">,</font>true<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">),      </font><font color="#008000"><i>{cero/0}
                   </i></font><font color="#000080">(</font>false<font color="#000080">,</font>false<font color="#000080">,</font>true<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font>true<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">),  </font><font color="#008000"><i>{uno/1}
                   </i></font><font color="#000080">(</font>true<font color="#000080">,</font>false<font color="#000080">,</font>true<font color="#000080">,</font>true<font color="#000080">,</font>true<font color="#000080">,</font>false<font color="#000080">,</font>true<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">),     </font><font color="#008000"><i>{dos/2}
                   </i></font><font color="#000080">(</font>true<font color="#000080">,</font>false<font color="#000080">,</font>true<font color="#000080">,</font>true<font color="#000080">,</font>false<font color="#000080">,</font>true<font color="#000080">,</font>true<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">),     </font><font color="#008000"><i>{tres/3}
                   </i></font><font color="#000080">(</font>false<font color="#000080">,</font>true<font color="#000080">,</font>true<font color="#000080">,</font>true<font color="#000080">,</font>false<font color="#000080">,</font>true<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">),    </font><font color="#008000"><i>{cuatro/4}
                   </i></font><font color="#000080">(</font>true<font color="#000080">,</font>true<font color="#000080">,</font>false<font color="#000080">,</font>true<font color="#000080">,</font>false<font color="#000080">,</font>true<font color="#000080">,</font>true<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">),     </font><font color="#008000"><i>{cinco/5}
                   </i></font><font color="#000080">(</font>true<font color="#000080">,</font>true<font color="#000080">,</font>false<font color="#000080">,</font>true<font color="#000080">,</font>true<font color="#000080">,</font>true<font color="#000080">,</font>true<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">),      </font><font color="#008000"><i>{seis/6}
                   </i></font><font color="#000080">(</font>true<font color="#000080">,</font>false<font color="#000080">,</font>true<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font>true<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">),   </font><font color="#008000"><i>{siete/7}
                   </i></font><font color="#000080">(</font>true<font color="#000080">,</font>true<font color="#000080">,</font>true<font color="#000080">,</font>true<font color="#000080">,</font>true<font color="#000080">,</font>true<font color="#000080">,</font>true<font color="#000080">,</font>true<font color="#000080">,</font>true<font color="#000080">),         </font><font color="#008000"><i>{ocho/8}
                   </i></font><font color="#000080">(</font>true<font color="#000080">,</font>true<font color="#000080">,</font>true<font color="#000080">,</font>true<font color="#000080">,</font>false<font color="#000080">,</font>true<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">),     </font><font color="#008000"><i>{nueve/9}
                   </i></font><font color="#000080">(</font>true<font color="#000080">,</font>true<font color="#000080">,</font>false<font color="#000080">,</font>true<font color="#000080">,</font>true<font color="#000080">,</font>false<font color="#000080">,</font>true<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">),     </font><font color="#008000"><i>{E}
                   </i></font><font color="#000080">(</font>false<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font>true<font color="#000080">), </font><font color="#008000"><i>{desbordamiento/overflow}
                   </i></font><font color="#000080">(</font>false<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">),</font><font color="#008000"><i>{espacio/space}
                   </i></font><font color="#000080">(</font>false<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font>true<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">), </font><font color="#008000"><i>{signo menos/'-'}
                   </i></font><font color="#000080">(</font>false<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font>false<font color="#000080">,</font>true<font color="#000080">,</font>false<font color="#000080">));</font><font color="#008000"><i>{punto decimal/'.'}

    {this defines the edges of each segment, scaled to 1:80 vertically and 1::90 horizontally
             o#9      #1
                  ----------
              #2 /        /#3
                /   #4   /
               /--------/
           #5 /        / #6
             /   #7   /
            ----------   o #8
    }
    </i></font>digitos <font color="#000080">: </font>digi_data <font color="#000080">=
      (
        (</font><font color="#008000"><i>{uno, el horizontal, arriba}
         </i></font>data <font color="#000080">: ( (</font>x<font color="#000080">:</font><font color="#800000">20</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">75</font><font color="#000080">), (</font>x<font color="#000080">:</font><font color="#800000">26</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">80</font><font color="#000080">),
                  (</font>x<font color="#000080">:</font><font color="#800000">78</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">80</font><font color="#000080">), (</font>x<font color="#000080">:</font><font color="#800000">80</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">78</font><font color="#000080">),
                  (</font>x<font color="#000080">:</font><font color="#800000">69</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">70</font><font color="#000080">), (</font>x<font color="#000080">:</font><font color="#800000">28</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">70</font><font color="#000080">) );
         </font>longitud <font color="#000080">: </font><font color="#800000">6
        </font><font color="#000080">),
        (</font><font color="#008000"><i>{dos, vertical, izquierda y arriba}
         </i></font>data <font color="#000080">: ( (</font>x<font color="#000080">:</font><font color="#800000">19</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">73</font><font color="#000080">), (</font>x<font color="#000080">:</font><font color="#800000">27</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">67</font><font color="#000080">),
                  (</font>x<font color="#000080">:</font><font color="#800000">25</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">48</font><font color="#000080">), (</font>x<font color="#000080">:</font><font color="#800000">18</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">43</font><font color="#000080">),
                  (</font>x<font color="#000080">:</font><font color="#800000">15</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">45</font><font color="#000080">), (</font>x<font color="#000080">:-</font><font color="#800000">1</font><font color="#000080">;</font>y<font color="#000080">:-</font><font color="#800000">1</font><font color="#000080">) );
         </font>longitud <font color="#000080">: </font><font color="#800000">5
        </font><font color="#000080">),
        (</font><font color="#008000"><i>{tres, vertical, derecha y arriba}
         </i></font>data <font color="#000080">: ( (</font>x<font color="#000080">:</font><font color="#800000">80</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">75</font><font color="#000080">), (</font>x<font color="#000080">:</font><font color="#800000">77</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">45</font><font color="#000080">),
                  (</font>x<font color="#000080">:</font><font color="#800000">74</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">42</font><font color="#000080">), (</font>x<font color="#000080">:</font><font color="#800000">67</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">47</font><font color="#000080">),
                  (</font>x<font color="#000080">:</font><font color="#800000">69</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">67</font><font color="#000080">), (</font>x<font color="#000080">:-</font><font color="#800000">1</font><font color="#000080">;</font>y<font color="#000080">:-</font><font color="#800000">1</font><font color="#000080">) );
         </font>longitud <font color="#000080">: </font><font color="#800000">5
        </font><font color="#000080">),
        (</font><font color="#008000"><i>{cuatro, horizontal en el medio}
         </i></font>data <font color="#000080">: ( (</font>x<font color="#000080">:</font><font color="#800000">27</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">47</font><font color="#000080">), (</font>x<font color="#000080">:</font><font color="#800000">63</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">47</font><font color="#000080">),
                  (</font>x<font color="#000080">:</font><font color="#800000">71</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">41</font><font color="#000080">), (</font>x<font color="#000080">:</font><font color="#800000">62</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">37</font><font color="#000080">),
                  (</font>x<font color="#000080">:</font><font color="#800000">25</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">37</font><font color="#000080">), (</font>x<font color="#000080">:</font><font color="#800000">20</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">42</font><font color="#000080">) );
         </font>longitud <font color="#000080">:  </font><font color="#800000">6
        </font><font color="#000080">),
        (</font><font color="#008000"><i>{cinco, vertical, izquierda y abajo}
         </i></font>data <font color="#000080">: ( (</font>x<font color="#000080">:</font><font color="#800000">14</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">40</font><font color="#000080">), (</font>x<font color="#000080">:</font><font color="#800000">17</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">42</font><font color="#000080">),
                  (</font>x<font color="#000080">:</font><font color="#800000">22</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">36</font><font color="#000080">), (</font>x<font color="#000080">:</font><font color="#800000">19</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">12</font><font color="#000080">),
                  (</font>x<font color="#000080">:</font><font color="#800000">10</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">09</font><font color="#000080">), (</font>x<font color="#000080">:-</font><font color="#800000">1</font><font color="#000080">;</font>y<font color="#000080">:-</font><font color="#800000">1</font><font color="#000080">) );
         </font>longitud <font color="#000080">: </font><font color="#800000">5
        </font><font color="#000080">),
        (</font><font color="#008000"><i>{seis, vertical, derecha y abajo}
         </i></font>data <font color="#000080">: ( (</font>x<font color="#000080">:</font><font color="#800000">73</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">40</font><font color="#000080">), (</font>x<font color="#000080">:</font><font color="#800000">75</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">37</font><font color="#000080">),
                  (</font>x<font color="#000080">:</font><font color="#800000">70</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">03</font><font color="#000080">), (</font>x<font color="#000080">:</font><font color="#800000">68</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">00</font><font color="#000080">),
                  (</font>x<font color="#000080">:</font><font color="#800000">61</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">11</font><font color="#000080">), (</font>x<font color="#000080">:</font><font color="#800000">64</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">36</font><font color="#000080">) );
         </font>longitud <font color="#000080">:  </font><font color="#800000">6
        </font><font color="#000080">),
        (</font><font color="#008000"><i>{siete, horizontal, abajo}
         </i></font>data <font color="#000080">: ( (</font>x<font color="#000080">:</font><font color="#800000">21</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">10</font><font color="#000080">), (</font>x<font color="#000080">:</font><font color="#800000">58</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">10</font><font color="#000080">),
                  (</font>x<font color="#000080">:</font><font color="#800000">64</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">00</font><font color="#000080">), (</font>x<font color="#000080">:</font><font color="#800000">13</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">00</font><font color="#000080">),
                  (</font>x<font color="#000080">:</font><font color="#800000">10</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">05</font><font color="#000080">), (</font>x<font color="#000080">:</font><font color="#800000">11</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">07</font><font color="#000080">) );
         </font>longitud <font color="#000080">:  </font><font color="#800000">6
        </font><font color="#000080">),
        (</font><font color="#008000"><i>{ocho, punto decimal}
         </i></font>data <font color="#000080">: ( (</font>x<font color="#000080">:</font><font color="#800000">80</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">10</font><font color="#000080">), (</font>x<font color="#000080">:</font><font color="#800000">90</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">10</font><font color="#000080">),
                  (</font>x<font color="#000080">:</font><font color="#800000">89</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">00</font><font color="#000080">), (</font>x<font color="#000080">:</font><font color="#800000">79</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">00</font><font color="#000080">),
                  (</font>x<font color="#000080">:-</font><font color="#800000">1</font><font color="#000080">;</font>y<font color="#000080">:-</font><font color="#800000">1</font><font color="#000080">), (</font>x<font color="#000080">:-</font><font color="#800000">1</font><font color="#000080">;</font>y<font color="#000080">:-</font><font color="#800000">1</font><font color="#000080">) );
         </font>longitud <font color="#000080">: </font><font color="#800000">4
        </font><font color="#000080">),
        (</font><font color="#008000"><i>{nueve, desbordamiento}
         </i></font>data <font color="#000080">: ( (</font>x<font color="#000080">:</font><font color="#800000">01</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">80</font><font color="#000080">), (</font>x<font color="#000080">:</font><font color="#800000">11</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">80</font><font color="#000080">),
                  (</font>x<font color="#000080">:</font><font color="#800000">10</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">70</font><font color="#000080">), (</font>x<font color="#000080">:</font><font color="#800000">00</font><font color="#000080">;</font>y<font color="#000080">:</font><font color="#800000">70</font><font color="#000080">),
                  (</font>x<font color="#000080">:-</font><font color="#800000">1</font><font color="#000080">;</font>y<font color="#000080">:-</font><font color="#800000">1</font><font color="#000080">), (</font>x<font color="#000080">:-</font><font color="#800000">1</font><font color="#000080">;</font>y<font color="#000080">:-</font><font color="#800000">1</font><font color="#000080">) );
         </font>longitud <font color="#000080">: </font><font color="#800000">4
        </font><font color="#000080">)
      );
</font><font color="#FF0000"><b>constructor </b></font>Display<font color="#000080">.</font>init<font color="#000080">;
</font><font color="#FF0000"><b>type
   </b></font>mem_buffer <font color="#000080">= </font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">255</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">..</font><font color="#800000">63</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>byte<font color="#000080">;
     </font><font color="#008000"><i>{temp. buffer for initialization}
</i></font><font color="#FF0000"><b>var
   </b></font>xinicial<font color="#000080">,</font>yinicial<font color="#000080">:</font>integer<font color="#000080">;
   </font>resx<font color="#000080">,</font>resy<font color="#000080">:</font>real<font color="#000080">;
   </font>t<font color="#000080">,</font>l<font color="#000080">,</font>n<font color="#000080">,</font>digit<font color="#000080">:</font>byte<font color="#000080">;
   </font>si<font color="#000080">,</font>id<font color="#000080">:</font>pointtype<font color="#000080">;
   </font>puntos <font color="#000080">: </font><font color="#FF0000"><b>array </b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">6</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font>pointtype<font color="#000080">;
   </font>v_mem <font color="#000080">: ^</font>mem_buffer<font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>pon_mem_XY <font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">:</font>byte<font color="#000080">);       </font><font color="#008000"><i>{putpixel in temp. buffer to draw each segment}
</i></font><font color="#FF0000"><b>var </b></font>sx<font color="#000080">,</font>ox<font color="#000080">:</font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>sx<font color="#000080">:=</font>x <font color="#FF0000"><b>div </b></font><font color="#800000">8</font><font color="#000080">;</font>ox<font color="#000080">:=</font>x<font color="#000080">-</font>sx<font color="#000080">*</font><font color="#800000">8</font><font color="#000080">;
  </font>v_mem<font color="#000080">^[</font>y<font color="#000080">,</font>sx<font color="#000080">]:=</font>v_mem<font color="#000080">^[</font>y<font color="#000080">,</font>sx<font color="#000080">] </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font><font color="#800000">1 </font><font color="#FF0000"><b>shl </b></font>ox<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>get_mem_XY <font color="#000080">(</font>x<font color="#000080">,</font>y<font color="#000080">:</font>byte<font color="#000080">):</font>boolean<font color="#000080">;  </font><font color="#008000"><i>{getpixel from temp. buffer}
</i></font><font color="#FF0000"><b>var </b></font>sx<font color="#000080">,</font>ox<font color="#000080">,</font>comp<font color="#000080">:</font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>sx<font color="#000080">:=</font>x <font color="#FF0000"><b>div </b></font><font color="#800000">8</font><font color="#000080">;
  </font>ox<font color="#000080">:=</font>x<font color="#000080">-(</font>sx<font color="#000080">*</font><font color="#800000">8</font><font color="#000080">);   </font><font color="#008000"><i>{faster than mod}
  </i></font>comp<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>shl </b></font>ox<font color="#000080">;
  </font>get_mem_XY<font color="#000080">:=(</font>v_mem<font color="#000080">^[</font>y<font color="#000080">,</font>sx<font color="#000080">] </font><font color="#FF0000"><b>and </b></font>comp<font color="#000080">)=</font>comp<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>halla_extremos<font color="#000080">; </font><font color="#008000"><i>{finds minimum area that covers a digit}
</i></font><font color="#FF0000"><b>var </b></font>a<font color="#000080">:</font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>si<font color="#000080">.</font>x<font color="#000080">:=</font>getmaxx<font color="#000080">;</font>si<font color="#000080">.</font>y<font color="#000080">:=</font>getmaxy<font color="#000080">;</font>id<font color="#000080">.</font>x<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;</font>id<font color="#000080">.</font>y<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>a<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>digitos<font color="#000080">[</font>t<font color="#000080">].</font>longitud <font color="#FF0000"><b>do
     begin
       if </b></font><font color="#000080">(</font>puntos<font color="#000080">[</font>a<font color="#000080">].</font>x<font color="#000080">&lt;</font>si<font color="#000080">.</font>x<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>si<font color="#000080">.</font>x<font color="#000080">:=</font>puntos<font color="#000080">[</font>a<font color="#000080">].</font>x<font color="#000080">;
       </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>puntos<font color="#000080">[</font>a<font color="#000080">].</font>y<font color="#000080">&lt;</font>si<font color="#000080">.</font>y<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>si<font color="#000080">.</font>y<font color="#000080">:=</font>puntos<font color="#000080">[</font>a<font color="#000080">].</font>y<font color="#000080">;
       </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>puntos<font color="#000080">[</font>a<font color="#000080">].</font>x<font color="#000080">&gt;</font>id<font color="#000080">.</font>x<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>id<font color="#000080">.</font>x<font color="#000080">:=</font>puntos<font color="#000080">[</font>a<font color="#000080">].</font>x<font color="#000080">;
       </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>puntos<font color="#000080">[</font>a<font color="#000080">].</font>y<font color="#000080">&gt;</font>id<font color="#000080">.</font>y<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>id<font color="#000080">.</font>y<font color="#000080">:=</font>puntos<font color="#000080">[</font>a<font color="#000080">].</font>y<font color="#000080">;
     </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>Linea_mem <font color="#000080">(</font>X1<font color="#000080">,</font>Y1<font color="#000080">,</font>X2<font color="#000080">,</font>Y2 <font color="#000080">: </font>integer<font color="#000080">); </font><font color="#008000"><i>{draws a line in temp. buffer}
</i></font><font color="#FF0000"><b>var </b></font>dx<font color="#000080">,</font>x3<font color="#000080">,</font>y3<font color="#000080">:</font>integer<font color="#000080">; </font>m<font color="#000080">:</font>real<font color="#000080">;
</font><font color="#FF0000"><b>begin
  if </b></font><font color="#000080">(</font>x1<font color="#000080">&gt;</font>x2<font color="#000080">) </font><font color="#FF0000"><b>then begin
                   </b></font>x3<font color="#000080">:=</font>x1<font color="#000080">;</font>x1<font color="#000080">:=</font>x2<font color="#000080">;</font>x2<font color="#000080">:=</font>x3<font color="#000080">;
                   </font>y3<font color="#000080">:=</font>y1<font color="#000080">;</font>y1<font color="#000080">:=</font>y2<font color="#000080">;</font>y2<font color="#000080">:=</font>y3<font color="#000080">;
                  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>x2<font color="#000080">&lt;&gt;</font>x1<font color="#000080">) </font><font color="#FF0000"><b>then
   begin
    </b></font>m<font color="#000080">:=(</font>Y2<font color="#000080">-</font>Y1<font color="#000080">)/(</font>X2<font color="#000080">-</font>X1<font color="#000080">);
    </font><font color="#FF0000"><b>for </b></font>dx<font color="#000080">:=</font>X1 <font color="#FF0000"><b>to </b></font>X2 <font color="#FF0000"><b>do </b></font>pon_mem_XY <font color="#000080">(</font>dx<font color="#000080">,</font>y1<font color="#000080">+</font>round<font color="#000080">(</font>m<font color="#000080">*(</font>dx<font color="#000080">-</font>X1<font color="#000080">)));
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>y1<font color="#000080">&gt;</font>y2<font color="#000080">) </font><font color="#FF0000"><b>then begin
                   </b></font>x3<font color="#000080">:=</font>x1<font color="#000080">;</font>x1<font color="#000080">:=</font>x2<font color="#000080">;</font>x2<font color="#000080">:=</font>x3<font color="#000080">;
                   </font>y3<font color="#000080">:=</font>y1<font color="#000080">;</font>y1<font color="#000080">:=</font>y2<font color="#000080">;</font>y2<font color="#000080">:=</font>y3<font color="#000080">;
                  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>y2<font color="#000080">&lt;&gt;</font>y1<font color="#000080">) </font><font color="#FF0000"><b>then
   begin
    </b></font>m<font color="#000080">:=(</font>X2<font color="#000080">-</font>X1<font color="#000080">)/(</font>Y2<font color="#000080">-</font>Y1<font color="#000080">);
    </font><font color="#FF0000"><b>for </b></font>dx<font color="#000080">:=</font>Y1 <font color="#FF0000"><b>to </b></font>Y2 <font color="#FF0000"><b>do </b></font>pon_mem_XY<font color="#000080">(</font>x1<font color="#000080">+</font>round<font color="#000080">(</font>m<font color="#000080">*(</font>dx<font color="#000080">-</font>Y1<font color="#000080">)),</font>dx<font color="#000080">);
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>graba_palote<font color="#000080">(</font>pal<font color="#000080">:</font>byte<font color="#000080">); </font><font color="#008000"><i>{by now a segment is drawn in temp. buffer,
                                   the task is finding the first and last column
                                   for each row}
</i></font><font color="#FF0000"><b>var
  </b></font>lneas<font color="#000080">:</font>byte<font color="#000080">;</font>u<font color="#000080">,</font>p<font color="#000080">:</font>integer<font color="#000080">;
</font><font color="#FF0000"><b>function </b></font>primer_negro<font color="#000080">:</font>byte<font color="#000080">; </font><font color="#008000"><i>{primer_extremo}
</i></font><font color="#FF0000"><b>var </b></font>f<font color="#000080">:</font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>primer_negro<font color="#000080">:=</font><font color="#800000">255</font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>f<font color="#000080">:=</font>si<font color="#000080">.</font>x <font color="#FF0000"><b>to </b></font>id<font color="#000080">.</font>x <font color="#FF0000"><b>do
    if </b></font>get_mem_XY<font color="#000080">(</font>f<font color="#000080">,</font>lneas<font color="#000080">) </font><font color="#FF0000"><b>then begin </b></font>primer_negro<font color="#000080">:=</font>f<font color="#000080">;</font>exit<font color="#000080">;</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>function </b></font>ultimo_negro<font color="#000080">:</font>byte<font color="#000080">; </font><font color="#008000"><i>{ultimo extremo}
</i></font><font color="#FF0000"><b>var </b></font>f<font color="#000080">:</font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>ultimo_negro<font color="#000080">:=</font><font color="#800000">255</font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>f<font color="#000080">:=</font>p <font color="#FF0000"><b>to </b></font>id<font color="#000080">.</font>x <font color="#FF0000"><b>do
    if </b></font>get_mem_XY <font color="#000080">(</font>f<font color="#000080">,</font>lneas<font color="#000080">) </font><font color="#FF0000"><b>and not</b></font><font color="#000080">(</font>get_mem_XY<font color="#000080">(</font>f<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">,</font>lneas<font color="#000080">)) </font><font color="#FF0000"><b>then </b></font>ultimo_negro<font color="#000080">:=</font>f<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>digi_masc<font color="#000080">(</font>graficos<font color="#000080">[</font>pal<font color="#000080">]^).</font>num_lin<font color="#000080">:=</font>id<font color="#000080">.</font>y<font color="#000080">-</font>si<font color="#000080">.</font>y<font color="#000080">;
    </font><font color="#008000"><i>{# of rows to scan}
  </i></font>digi_masc<font color="#000080">(</font>graficos<font color="#000080">[</font>pal<font color="#000080">]^).</font>esq_si<font color="#000080">:=</font>si<font color="#000080">;
    </font><font color="#008000"><i>{top-left corner of segment}
  </i></font><font color="#FF0000"><b>for </b></font>lneas<font color="#000080">:=</font>si<font color="#000080">.</font>y <font color="#FF0000"><b>to </b></font>id<font color="#000080">.</font>y <font color="#FF0000"><b>do
    begin
      </b></font>p<font color="#000080">:=</font>primer_negro<font color="#000080">;
      </font>u<font color="#000080">:=</font>ultimo_negro<font color="#000080">;
      </font>digi_masc<font color="#000080">(</font>graficos<font color="#000080">[</font>pal<font color="#000080">]^).</font>datos<font color="#000080">[</font>lneas<font color="#000080">-</font>si<font color="#000080">.</font>y<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">].</font>p<font color="#000080">:=</font>p<font color="#000080">-</font>si<font color="#000080">.</font>x<font color="#000080">;
      </font>digi_masc<font color="#000080">(</font>graficos<font color="#000080">[</font>pal<font color="#000080">]^).</font>datos<font color="#000080">[</font>lneas<font color="#000080">-</font>si<font color="#000080">.</font>y<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">].</font>u<font color="#000080">:=</font>u<font color="#000080">-</font>si<font color="#000080">.</font>x<font color="#000080">;
      </font><font color="#008000"><i>{store segments in memory}
     </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  if </b></font><font color="#000080">(</font>x2<font color="#000080">&lt;</font>x1<font color="#000080">+</font>num_digits<font color="#000080">*</font><font color="#800000">3</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>x2<font color="#000080">&gt;</font>x1<font color="#000080">+</font><font color="#800000">254</font><font color="#000080">*</font>num_digits<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>y2<font color="#000080">&lt;=</font>y1<font color="#000080">+</font><font color="#800000">4</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>num_digits<font color="#000080">&lt;</font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>then
   begin
    </b></font>writeln <font color="#000080">(</font><font color="#800000">'Error: Invalid parameters: Area too small or number of digits&lt;1'</font><font color="#000080">);
    </font>FAIL<font color="#000080">;
  </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>xi<font color="#000080">:=</font>x1<font color="#000080">;</font>xf<font color="#000080">:=</font>x2<font color="#000080">;</font>yi<font color="#000080">:=</font>y1<font color="#000080">;</font>yf<font color="#000080">:=</font>y2<font color="#000080">;</font>col_on<font color="#000080">:=</font>forecolor<font color="#000080">;</font>col_off<font color="#000080">:=</font>backcolor<font color="#000080">;</font>num_cars<font color="#000080">:=</font>num_digits<font color="#000080">;
  </font>resx<font color="#000080">:=((</font>x2<font color="#000080">-</font>x1<font color="#000080">)/</font>num_digits<font color="#000080">)*</font><font color="#800000">0.0111</font><font color="#000080">;
  </font>resy<font color="#000080">:=(</font>y2<font color="#000080">-</font>y1<font color="#000080">)*</font><font color="#800000">0.0125</font><font color="#000080">;
   </font><font color="#008000"><i>{Constants to scale digits}
  </i></font>xinicial<font color="#000080">:=</font>xi<font color="#000080">;
  </font>yinicial<font color="#000080">:=</font>yi<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>MaxAvail<font color="#000080">&lt;</font>sizeof<font color="#000080">(</font>mem_buffer<font color="#000080">)) </font><font color="#FF0000"><b>then
   begin
     </b></font>writeln <font color="#000080">(</font><font color="#800000">'Out of memory creating lcd display. Initialization failed.'</font><font color="#000080">);
     </font>fail<font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>new <font color="#000080">(</font>V_mem<font color="#000080">); </font><font color="#008000"><i>{gets temp. buffer}
  </i></font><font color="#FF0000"><b>for </b></font>t<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>palotes_x_digito <font color="#FF0000"><b>do </b></font>graficos<font color="#000080">[</font>t<font color="#000080">]:=</font><font color="#FF0000"><b>NIL</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>t<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>palotes_x_digito <font color="#FF0000"><b>do
    begin
     </b></font>l<font color="#000080">:=</font>digitos<font color="#000080">[</font>t<font color="#000080">].</font>longitud<font color="#000080">;
     </font>fillchar <font color="#000080">(</font>v_mem<font color="#000080">^,</font>sizeof<font color="#000080">(</font>mem_buffer<font color="#000080">),</font><font color="#800000">0</font><font color="#000080">);
     </font><font color="#FF0000"><b>for </b></font>n<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>l <font color="#FF0000"><b>do
      begin
       </b></font>puntos<font color="#000080">[</font>n<font color="#000080">].</font>x<font color="#000080">:=</font>round<font color="#000080">(</font>digitos<font color="#000080">[</font>t<font color="#000080">].</font>data<font color="#000080">[</font>n<font color="#000080">].</font>x<font color="#000080">*</font>resx<font color="#000080">);
       </font>puntos<font color="#000080">[</font>n<font color="#000080">].</font>y<font color="#000080">:=</font>round<font color="#000080">(</font>digitos<font color="#000080">[</font>t<font color="#000080">].</font>data<font color="#000080">[</font>n<font color="#000080">].</font>y<font color="#000080">*</font>resy<font color="#000080">);
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{scales points...}
     </i></font>halla_extremos<font color="#000080">; </font><font color="#008000"><i>{find minimum area}
     </i></font>tamano_graficos<font color="#000080">[</font>t<font color="#000080">]:=</font><font color="#800000">5</font><font color="#000080">+(</font><font color="#800000">2</font><font color="#000080">*(</font>id<font color="#000080">.</font>y<font color="#000080">-</font>si<font color="#000080">.</font>y<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">));</font><font color="#008000"><i>{gets memory to copy coded scaled segments}
     </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>MaxAvail<font color="#000080">&lt;</font>tamano_graficos<font color="#000080">[</font>t<font color="#000080">]) </font><font color="#FF0000"><b>then
      begin
       </b></font>writeln <font color="#000080">(</font><font color="#800000">'Out of memory creating lcd display. Initialization failed.'</font><font color="#000080">);
       </font>done<font color="#000080">;
       </font>fail<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
     </font>getmem<font color="#000080">(</font>graficos<font color="#000080">[</font>t<font color="#000080">],</font>tamano_graficos<font color="#000080">[</font>t<font color="#000080">]);
     </font><font color="#FF0000"><b>for </b></font>n<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>l <font color="#FF0000"><b>do
        </b></font>linea_mem <font color="#000080">(</font>puntos<font color="#000080">[</font>n<font color="#000080">].</font>x<font color="#000080">,</font>puntos<font color="#000080">[</font>n<font color="#000080">].</font>y<font color="#000080">,</font>puntos<font color="#000080">[(</font>n <font color="#FF0000"><b>mod </b></font>l<font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">].</font>x<font color="#000080">,</font>puntos<font color="#000080">[(</font>n <font color="#FF0000"><b>mod </b></font>l<font color="#000080">)+</font><font color="#800000">1</font><font color="#000080">].</font>y<font color="#000080">);
       </font><font color="#008000"><i>{draws segment in memory}
     </i></font>graba_palote<font color="#000080">(</font>t<font color="#000080">);
       </font><font color="#008000"><i>{copy segment to memory}
    </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font>dispose <font color="#000080">(</font>V_mem<font color="#000080">); </font><font color="#008000"><i>{release temp buffer}
   </i></font>fillchar <font color="#000080">(</font>buffer<font color="#000080">,</font>sizeof<font color="#000080">(</font>buffer<font color="#000080">),</font>espacio<font color="#000080">); </font><font color="#008000"><i>{nothing written in display}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>destructor </b></font>display<font color="#000080">.</font>done<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>pal <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
   </b></font>display_string <font color="#000080">(</font><font color="#800000">''</font><font color="#000080">);
   </font><font color="#FF0000"><b>for </b></font>pal<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>palotes_x_digito <font color="#FF0000"><b>do
    if </b></font><font color="#000080">(</font>graficos<font color="#000080">[</font>pal<font color="#000080">]&lt;&gt;</font><font color="#FF0000"><b>NIL</b></font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>freemem <font color="#000080">(</font>graficos<font color="#000080">[</font>pal<font color="#000080">], </font>tamano_graficos<font color="#000080">[</font>pal<font color="#000080">])
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;


</font><font color="#FF0000"><b>Procedure </b></font>display<font color="#000080">.</font>display_string<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>resx<font color="#000080">:</font>real<font color="#000080">;</font>xinicial<font color="#000080">,</font>yinicial<font color="#000080">:</font>integer<font color="#000080">;</font>f<font color="#000080">,</font>digit<font color="#000080">:</font>byte<font color="#000080">;</font>cr<font color="#000080">:</font>digi_font<font color="#000080">;
  </font>cadena<font color="#000080">:</font>digi_st<font color="#000080">;</font>pdecs<font color="#000080">:</font>byte<font color="#000080">;
</font><font color="#FF0000"><b>const
  </b></font>blancos <font color="#000080">:</font>st40 <font color="#000080">= </font><font color="#800000">'                                       '</font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>barrotes<font color="#000080">(</font>barrote<font color="#000080">:</font>byte<font color="#000080">;</font>encendido<font color="#000080">:</font>boolean<font color="#000080">); </font><font color="#008000"><i>{draws a segment}
</i></font><font color="#FF0000"><b>var </b></font>lineas<font color="#000080">:</font>byte<font color="#000080">;
    </font>color <font color="#000080">:</font>word<font color="#000080">;
</font><font color="#FF0000"><b>begin
  if </b></font>encendido <font color="#FF0000"><b>then </b></font>color<font color="#000080">:=</font>col_on
               <font color="#FF0000"><b>else </b></font>color<font color="#000080">:=</font>col_off<font color="#000080">; </font><font color="#008000"><i>{segment colour}
  </i></font>setcolor <font color="#000080">(</font>color<font color="#000080">);
  </font><font color="#FF0000"><b>for </b></font>lineas<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>digi_masc<font color="#000080">(</font>graficos<font color="#000080">[</font>barrote<font color="#000080">]^).</font>num_lin <font color="#FF0000"><b>do
      if </b></font><font color="#000080">(</font>digi_masc<font color="#000080">(</font>graficos<font color="#000080">[</font>barrote<font color="#000080">]^).</font>datos<font color="#000080">[</font>lineas<font color="#000080">].</font>p<font color="#000080">&lt;&gt;</font><font color="#800000">255</font><font color="#000080">) </font><font color="#FF0000"><b>then
       </b></font>line <font color="#000080">(</font>xinicial<font color="#000080">+</font>digi_masc<font color="#000080">(</font>graficos<font color="#000080">[</font>barrote<font color="#000080">]^).</font>esq_si<font color="#000080">.</font>x<font color="#000080">+</font>digi_masc<font color="#000080">(</font>graficos<font color="#000080">[</font>barrote<font color="#000080">]^).</font>datos<font color="#000080">[</font>lineas<font color="#000080">].</font>p<font color="#000080">,
             </font>yinicial<font color="#000080">-</font>digi_masc<font color="#000080">(</font>graficos<font color="#000080">[</font>barrote<font color="#000080">]^).</font>esq_si<font color="#000080">.</font>y<font color="#000080">-</font>lineas<font color="#000080">,
             </font>xinicial<font color="#000080">+</font>digi_masc<font color="#000080">(</font>graficos<font color="#000080">[</font>barrote<font color="#000080">]^).</font>esq_si<font color="#000080">.</font>x<font color="#000080">+</font>digi_masc<font color="#000080">(</font>graficos<font color="#000080">[</font>barrote<font color="#000080">]^).</font>datos<font color="#000080">[</font>lineas<font color="#000080">].</font>u<font color="#000080">,
             </font>yinicial<font color="#000080">-</font>digi_masc<font color="#000080">(</font>graficos<font color="#000080">[</font>barrote<font color="#000080">]^).</font>esq_si<font color="#000080">.</font>y<font color="#000080">-</font>lineas<font color="#000080">);
  </font><font color="#008000"><i>{actually draws the segment, scaning rows in memory}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>get_font_str<font color="#000080">(</font><font color="#FF0000"><b>var </b></font>res<font color="#000080">:</font>digi_st<font color="#000080">); </font><font color="#008000"><i>{conversion from string to displayable font}
</i></font><font color="#FF0000"><b>var </b></font>f<font color="#000080">:</font>byte<font color="#000080">;</font>cr<font color="#000080">:</font>char<font color="#000080">;
</font><font color="#FF0000"><b>begin
  for </b></font>f<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>byte<font color="#000080">(</font>cadena_num<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]) </font><font color="#FF0000"><b>do
    case </b></font>cadena_num<font color="#000080">[</font>f<font color="#000080">] </font><font color="#FF0000"><b>of
     </b></font><font color="#800000">'E' </font><font color="#000080">: </font>res<font color="#000080">[</font>f<font color="#000080">]:=</font>E<font color="#000080">;
     </font><font color="#800000">' ' </font><font color="#000080">: </font>res<font color="#000080">[</font>f<font color="#000080">]:=</font>espacio<font color="#000080">;
     </font><font color="#800000">'-' </font><font color="#000080">: </font>res<font color="#000080">[</font>f<font color="#000080">]:=</font>menos<font color="#000080">;
     </font><font color="#800000">'.' </font><font color="#000080">: </font>res<font color="#000080">[</font>f<font color="#000080">]:=</font>punto<font color="#000080">;
     </font><font color="#800000">'+' </font><font color="#000080">: </font>res<font color="#000080">[</font>f<font color="#000080">]:=</font>espacio<font color="#000080">;             </font><font color="#008000"><i>{'+' is not representable}
    </i></font><font color="#FF0000"><b>else
           </b></font>res<font color="#000080">[</font>f<font color="#000080">]:=</font>digi_font<font color="#000080">(</font>BYTE<font color="#000080">(</font>cadena_num<font color="#000080">[</font>f<font color="#000080">])-</font><font color="#800000">48</font><font color="#000080">);
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>display<font color="#000080">(</font>caracter<font color="#000080">:</font>digi_font<font color="#000080">); </font><font color="#008000"><i>{displays a character}
</i></font><font color="#FF0000"><b>var </b></font>g<font color="#000080">:</font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>xinicial<font color="#000080">:=</font>xi<font color="#000080">+</font>round<font color="#000080">(</font>digit<font color="#000080">*</font>resx<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>caracter<font color="#000080">=</font>punto<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>barrotes <font color="#000080">(</font><font color="#800000">8</font><font color="#000080">,</font>true<font color="#000080">)
  </font><font color="#FF0000"><b>else
  if </b></font><font color="#000080">(</font>caracter<font color="#000080">=</font>desbordamiento<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>barrotes <font color="#000080">(</font><font color="#800000">9</font><font color="#000080">,</font>true<font color="#000080">)
  </font><font color="#FF0000"><b>else
   begin
    </b></font>inc<font color="#000080">(</font>digit<font color="#000080">);   </font><font color="#008000"><i>{# of digit}
    </i></font><font color="#FF0000"><b>for </b></font>g<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">7 </font><font color="#FF0000"><b>do
       if </b></font><font color="#000080">(</font>caracteres<font color="#000080">[</font>caracter<font color="#000080">,</font>g<font color="#000080">]&lt;&gt;</font>caracteres<font color="#000080">[</font>digi_font<font color="#000080">(</font>buffer<font color="#000080">[</font>f<font color="#000080">]),</font>g<font color="#000080">])
           </font><font color="#FF0000"><b>then </b></font>barrotes <font color="#000080">(</font>g<font color="#000080">,</font>caracteres<font color="#000080">[</font>caracter<font color="#000080">,</font>g<font color="#000080">]);
          </font><font color="#008000"><i>{only draws a segment if it has changed}
   </i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>borra_desborde<font color="#000080">;  </font><font color="#008000"><i>{erases overflow}
</i></font><font color="#FF0000"><b>begin
  </b></font>barrotes <font color="#000080">(</font><font color="#800000">9</font><font color="#000080">,</font>false<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>borra_punto<font color="#000080">;  </font><font color="#008000"><i>{erases decimal point}
</i></font><font color="#FF0000"><b>begin
  </b></font>barrotes <font color="#000080">(</font><font color="#800000">8</font><font color="#000080">,</font>false<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>function </b></font>num_puntos<font color="#000080">:</font>byte<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>a<font color="#000080">,</font>res<font color="#000080">:</font>byte<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>res<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>a<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>ord<font color="#000080">(</font>cadena_num<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]) </font><font color="#FF0000"><b>do if </b></font>cadena_num<font color="#000080">[</font>a<font color="#000080">]=</font><font color="#800000">'.' </font><font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>res<font color="#000080">);
  </font>num_puntos<font color="#000080">:=</font>res<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin </b></font><font color="#008000"><i>{proc. display}
  </i></font>digit<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">; </font><font color="#008000"><i>{digitos escritos}
  </i></font>resx<font color="#000080">:=(</font>xf<font color="#000080">-</font>xi<font color="#000080">)/</font>num_cars<font color="#000080">;
  </font>yinicial<font color="#000080">:=</font>yf<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font>desbordado <font color="#FF0000"><b>then
   begin
    </b></font>borra_desborde<font color="#000080">;
     </font><font color="#008000"><i>{erases overflow}
    </i></font>desbordado<font color="#000080">:=</font>false<font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>pdecs<font color="#000080">:=</font>num_puntos<font color="#000080">;
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>length<font color="#000080">(</font>cadena_num<font color="#000080">)-</font>pdecs<font color="#000080">&lt;</font>num_cars<font color="#000080">)
       </font><font color="#FF0000"><b>then
         </b></font>cadena_num<font color="#000080">:=</font>copy<font color="#000080">(</font>blancos<font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font>pdecs<font color="#000080">+</font>num_cars<font color="#000080">-</font>length<font color="#000080">(</font>cadena_num<font color="#000080">))+</font>cadena_num
  <font color="#FF0000"><b>else
  if </b></font><font color="#000080">(</font>length<font color="#000080">(</font>cadena_num<font color="#000080">)-</font>pdecs<font color="#000080">&gt;</font>num_cars<font color="#000080">)
       </font><font color="#FF0000"><b>then
        begin
         </b></font>desbordado<font color="#000080">:=</font>true<font color="#000080">;
         </font>cadena_num<font color="#000080">:=</font>copy<font color="#000080">(</font>cadena_num<font color="#000080">,(</font><font color="#800000">1</font><font color="#000080">+</font>length<font color="#000080">(</font>cadena_num<font color="#000080">)-</font>num_cars<font color="#000080">),</font>num_cars<font color="#000080">);
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>get_font_str <font color="#000080">(</font>cadena<font color="#000080">);
  </font><font color="#FF0000"><b>for </b></font>f<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>num_cars<font color="#000080">+</font>pdecs <font color="#FF0000"><b>do
   begin                 </b></font><font color="#008000"><i>{all characters}
    </i></font>cr<font color="#000080">:=</font>cadena<font color="#000080">[</font>f<font color="#000080">];
    </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>cr<font color="#000080">&lt;&gt;</font>punto<font color="#000080">) </font><font color="#FF0000"><b>then
    begin
     </b></font><font color="#008000"><i>{updates decimal point}
     </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>digi_font<font color="#000080">(</font>buffer<font color="#000080">[</font>f<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">])=</font>punto<font color="#000080">) </font><font color="#FF0000"><b>then
       begin
        if not</b></font><font color="#000080">(</font>cadena<font color="#000080">[</font>f<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">]=</font>punto<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>borra_punto
       <font color="#FF0000"><b>end
      else
        if </b></font><font color="#000080">(</font>cadena<font color="#000080">[</font>f<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">]=</font>punto<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>display <font color="#000080">(</font>punto<font color="#000080">);
     </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>cr<font color="#000080">=</font>digi_font<font color="#000080">(</font>buffer<font color="#000080">[</font>f<font color="#000080">]))
       </font><font color="#FF0000"><b>then </b></font>inc<font color="#000080">(</font>digit<font color="#000080">)
       </font><font color="#FF0000"><b>else
        begin
          </b></font><font color="#008000"><i>{only draws a character if it's changed}
          </i></font>display<font color="#000080">(</font>cadena<font color="#000080">[</font>f<font color="#000080">]);
          </font>buffer<font color="#000080">[</font>f<font color="#000080">]:=</font>byte<font color="#000080">(</font>cr<font color="#000080">);
        </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>digit<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">; </font><font color="#008000"><i>{el signo de desbordamiento se encuentra incluido en el primer digito}
  </i></font><font color="#FF0000"><b>if </b></font>desbordado <font color="#FF0000"><b>then </b></font>display<font color="#000080">(</font>desbordamiento<font color="#000080">);
  </font><font color="#008000"><i>{set overflow if necessary}
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>display<font color="#000080">.</font>display_real<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>cad <font color="#000080">: </font><font color="#FF0000"><b>STRING</b></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
  if </b></font><font color="#000080">(</font>ndecimals<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">&gt;=</font>num_cars<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>ndecimals<font color="#000080">:=</font>num_cars<font color="#000080">-</font><font color="#800000">2</font><font color="#000080">;
  </font>str <font color="#000080">(</font>r<font color="#000080">:</font>num_cars<font color="#000080">-</font>ndecimals<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">:</font>ndecimals<font color="#000080">, </font>cad<font color="#000080">);
  </font>display_string <font color="#000080">(</font>cad<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>display<font color="#000080">.</font>redraw<font color="#000080">;
</font><font color="#FF0000"><b>var </b></font>cad <font color="#000080">: </font>st40<font color="#000080">;
    </font>i <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
   </b></font>cad<font color="#000080">[</font><font color="#800000">0</font><font color="#000080">]:=</font>char<font color="#000080">(</font>num_cars<font color="#000080">);
   </font><font color="#FF0000"><b>for </b></font>i<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font>num_cars <font color="#FF0000"><b>do
     case </b></font>digi_font<font color="#000080">(</font>buffer<font color="#000080">[</font>i<font color="#000080">]) </font><font color="#FF0000"><b>OF
       </b></font>E<font color="#000080">: </font>cad<font color="#000080">[</font>i<font color="#000080">]:=</font><font color="#800000">'E'</font><font color="#000080">;
       </font>espacio<font color="#000080">: </font>cad<font color="#000080">[</font>i<font color="#000080">]:=</font><font color="#800000">' '</font><font color="#000080">;
       </font>menos<font color="#000080">: </font>cad<font color="#000080">[</font>i<font color="#000080">]:=</font><font color="#800000">'-'</font><font color="#000080">;
       </font>punto<font color="#000080">: </font>cad<font color="#000080">[</font>i<font color="#000080">]:=</font><font color="#800000">'.'</font><font color="#000080">;
     </font><font color="#FF0000"><b>else
       </b></font>cad<font color="#000080">[</font>i<font color="#000080">]:=</font>CHAR<font color="#000080">(</font><font color="#800000">48</font><font color="#000080">+</font>buffer<font color="#000080">[</font>i<font color="#000080">]);
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font>fillchar <font color="#000080">(</font>buffer<font color="#000080">, </font>sizeof<font color="#000080">(</font>buffer<font color="#000080">), </font>espacio<font color="#000080">);
   </font>display_string <font color="#000080">(</font>cad<font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font><font color="#008000"><i>{ ---------  UNIT NEED FOR THIS SNIPET ----------------------- }
</i></font><font color="#FF0000"><b>Unit </b></font>inisvga<font color="#000080">;
</font><font color="#FF0000"><b>interface
 uses </b></font>Crt<font color="#000080">,</font>Graph<font color="#000080">;
 </font><font color="#FF0000"><b>var
   </b></font>v <font color="#000080">: </font>byte<font color="#000080">;
   </font>OldExitProc <font color="#000080">: </font>Pointer<font color="#000080">;  </font><font color="#008000"><i>{ Saves exit procedure address }
   </i></font>graphdriver<font color="#000080">,</font>graphmode<font color="#000080">,</font>errorcode<font color="#000080">:</font>integer<font color="#000080">;
   </font>PathToDriver   <font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">[</font><font color="#800000">80</font><font color="#000080">];  </font><font color="#008000"><i>{ Stores the DOS path to *.BGI &amp; *.CHR }
 </i></font><font color="#FF0000"><b>const
   </b></font>edit            <font color="#000080">= </font><font color="#800000">0</font><font color="#000080">;
   </font>vga320x200x256  <font color="#000080">= </font><font color="#800000">1</font><font color="#000080">;
   </font>svga640x400x256 <font color="#000080">= </font><font color="#800000">2</font><font color="#000080">;
   </font>svga640x480x256 <font color="#000080">= </font><font color="#800000">3</font><font color="#000080">;
   </font>svga1024x768x256<font color="#000080">= </font><font color="#800000">4</font><font color="#000080">;
   </font>ega640x350x16   <font color="#000080">= </font><font color="#800000">5</font><font color="#000080">;
   </font>herc720x348x2   <font color="#000080">= </font><font color="#800000">6</font><font color="#000080">;

  </font><font color="#FF0000"><b>Procedure </b></font>Graficos<font color="#000080">(</font>modo_grafico<font color="#000080">:</font>byte<font color="#000080">);
  </font><font color="#FF0000"><b>Procedure </b></font>Cierragraficos<font color="#000080">;
  </font><font color="#FF0000"><b>Procedure </b></font>Dimensiones <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>horizontal<font color="#000080">, </font>vertical<font color="#000080">: </font>INTEGER<font color="#000080">);

</font><font color="#FF0000"><b>implementation
var
   </b></font>err<font color="#000080">:</font>integer<font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>Cierragraficos<font color="#000080">;
</font><font color="#FF0000"><b>begin
   </b></font>closegraph<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#008000"><i>{$F+}
</i></font><font color="#FF0000"><b>procedure </b></font>MyExitProc<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>ExitProc <font color="#000080">:= </font>OldExitProc<font color="#000080">; </font><font color="#008000"><i>{ Restore exit procedure address }
  </i></font>CloseGraph<font color="#000080">;              </font><font color="#008000"><i>{ Shut down the graphics system }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ MyExitProc }
{$F-}
{$F+}
</i></font><font color="#FF0000"><b>function </b></font>DetectVGA256 <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#008000"><i>{ Detects VGA or MCGA video cards }
</i></font><font color="#FF0000"><b>var
  </b></font>DetectedDriver <font color="#000080">: </font>integer<font color="#000080">;
  </font>SuggestedMode  <font color="#000080">: </font>integer<font color="#000080">;
</font><font color="#FF0000"><b>begin
  </b></font>DetectGraph<font color="#000080">(</font>DetectedDriver<font color="#000080">, </font>SuggestedMode<font color="#000080">);
  </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>DetectedDriver <font color="#000080">= </font>VGA<font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>DetectedDriver <font color="#000080">= </font>MCGA<font color="#000080">) </font><font color="#FF0000"><b>then
    </b></font>DetectVGA256 <font color="#000080">:= </font>v        <font color="#008000"><i>{ Default video mode = 0 }
  </i></font><font color="#FF0000"><b>else
    </b></font>DetectVGA256 <font color="#000080">:= </font>grError<font color="#000080">; </font><font color="#008000"><i>{ Couldn't detect hardware }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ DetectVGA256 }
{$F-}

</i></font><font color="#FF0000"><b>var
  </b></font>AutoDetectPointer <font color="#000080">: </font>pointer<font color="#000080">;


</font><font color="#FF0000"><b>function </b></font>Inicializa_svga<font color="#000080">:</font>byte<font color="#000080">;
</font><font color="#008000"><i>{ Initialize graphics and report any errors that may occur }
</i></font><font color="#FF0000"><b>var
  </b></font>InGraphicsMode <font color="#000080">: </font>boolean<font color="#000080">; </font><font color="#008000"><i>{ Flags initialization of graphics mode }
</i></font><font color="#FF0000"><b>begin
  </b></font><font color="#008000"><i>{ when using Crt and graphics, turn off Crt's memory-mapped writes }
  </i></font>DirectVideo <font color="#000080">:= </font>False<font color="#000080">;
  </font>OldExitProc <font color="#000080">:= </font>ExitProc<font color="#000080">;                </font><font color="#008000"><i>{ save previous exit proc }
  </i></font>ExitProc <font color="#000080">:= @</font>MyExitProc<font color="#000080">;                </font><font color="#008000"><i>{ insert our exit proc in chain }
  </i></font><font color="#FF0000"><b>repeat

    </b></font>AutoDetectPointer <font color="#000080">:= @</font>DetectVGA256<font color="#000080">;   </font><font color="#008000"><i>{ Point to detection routine }
    </i></font>GraphDriver <font color="#000080">:= </font>InstallUserDriver<font color="#000080">(</font><font color="#800000">'SVGA256'</font><font color="#000080">, </font>AutoDetectPointer<font color="#000080">);
    </font>GraphDriver <font color="#000080">:= </font>Detect<font color="#000080">;

    </font>InitGraph<font color="#000080">(</font>GraphDriver<font color="#000080">, </font>Graphmode<font color="#000080">, </font>PathToDriver<font color="#000080">);
    </font>ErrorCode <font color="#000080">:= </font>GraphResult<font color="#000080">;             </font><font color="#008000"><i>{ preserve error return }
    </i></font>inicializa_svga<font color="#000080">:=</font>grok<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>ErrorCode <font color="#000080">&lt;&gt; </font>grOK <font color="#FF0000"><b>then             </b></font><font color="#008000"><i>{ error? }
    </i></font><font color="#FF0000"><b>begin
      </b></font>Writeln<font color="#000080">(</font><font color="#800000">'Graphics error: '</font><font color="#000080">, </font>GraphErrorMsg<font color="#000080">(</font>ErrorCode<font color="#000080">));
      </font><font color="#FF0000"><b>if </b></font>ErrorCode <font color="#000080">= </font>grFileNotFound <font color="#FF0000"><b>then  </b></font><font color="#008000"><i>{ Can't find driver file }
      </i></font><font color="#FF0000"><b>begin
        </b></font>Writeln<font color="#000080">(</font><font color="#800000">'Enter full path to BGI driver or type &lt;Ctrl-Break&gt; to quit:'</font><font color="#000080">);
        </font>Readln<font color="#000080">(</font>PathToDriver<font color="#000080">);
        </font>Writeln<font color="#000080">;
      </font><font color="#FF0000"><b>end
      else
        </b></font>inicializa_Svga<font color="#000080">:=</font>grok<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font><font color="#FF0000"><b>until </b></font>ErrorCode <font color="#000080">= </font>grOK<font color="#000080">;
  </font>Randomize<font color="#000080">;                </font><font color="#008000"><i>{ init random number generator }
</i></font><font color="#FF0000"><b>end</b></font><font color="#000080">; </font><font color="#008000"><i>{ Initialize }

</i></font><font color="#FF0000"><b>procedure </b></font>Graficos<font color="#000080">(</font>modo_grafico<font color="#000080">:</font>byte<font color="#000080">);
</font><font color="#FF0000"><b>var  </b></font>ch<font color="#000080">:</font>char<font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>egadriver<font color="#000080">;
</font><font color="#FF0000"><b>begin
    </b></font>graphdriver<font color="#000080">:=</font>EGA<font color="#000080">;
    </font>graphmode<font color="#000080">:=</font>EGAHi<font color="#000080">;
    </font>InitGraph<font color="#000080">(</font>graphdriver<font color="#000080">,</font>graphmode<font color="#000080">,</font><font color="#800000">''</font><font color="#000080">);
    </font>Err <font color="#000080">:= </font>GraphResult<font color="#000080">;
    </font><font color="#FF0000"><b>if </b></font>Err <font color="#000080">&lt;&gt; </font>grOk <font color="#FF0000"><b>then </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'Graphics error:'</font><font color="#000080">,</font>GraphErrorMsg<font color="#000080">(</font>Err<font color="#000080">));
    </font>modo_grafico<font color="#000080">:=</font>ega640x350x16<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>Hercules<font color="#000080">;
</font><font color="#FF0000"><b>begin
     </b></font>graphdriver<font color="#000080">:=</font>hercmono<font color="#000080">;
     </font>graphmode<font color="#000080">:=</font>hercmonohi<font color="#000080">;
     </font>InitGraph<font color="#000080">(</font>graphdriver<font color="#000080">,</font>graphmode<font color="#000080">,</font><font color="#800000">''</font><font color="#000080">);
     </font>Err <font color="#000080">:= </font>GraphResult<font color="#000080">;
     </font><font color="#FF0000"><b>if </b></font>Err <font color="#000080">&lt;&gt; </font>grOk <font color="#FF0000"><b>then </b></font>WriteLn<font color="#000080">(</font><font color="#800000">'Graphics error:'</font><font color="#000080">,</font>GraphErrorMsg<font color="#000080">(</font>Err<font color="#000080">));
     </font>modo_grafico<font color="#000080">:=</font>herc720x348x2<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>begin
  if </b></font><font color="#000080">(</font>modo_grafico<font color="#000080">&lt;</font><font color="#800000">1</font><font color="#000080">) </font><font color="#FF0000"><b>or </b></font><font color="#000080">(</font>modo_grafico<font color="#000080">&gt;</font><font color="#800000">6</font><font color="#000080">) </font><font color="#FF0000"><b>then
   begin
    </b></font>window <font color="#000080">(</font><font color="#800000">20</font><font color="#000080">,</font><font color="#800000">8</font><font color="#000080">,</font><font color="#800000">60</font><font color="#000080">,</font><font color="#800000">16</font><font color="#000080">);
    </font>clrscr<font color="#000080">;
    </font>Writeln <font color="#000080">(</font><font color="#800000">'       Modos grficos'</font><font color="#000080">);
    </font>writeln<font color="#000080">;
    </font>Writeln <font color="#000080">(</font><font color="#800000">'1 - VGA 320x200 256 colores'</font><font color="#000080">);
    </font>Writeln <font color="#000080">(</font><font color="#800000">'2 - SVGA 600x480 256 colores'</font><font color="#000080">);
    </font>Writeln <font color="#000080">(</font><font color="#800000">'3 - SVGA 640x480 256 colores'</font><font color="#000080">);
    </font>Writeln <font color="#000080">(</font><font color="#800000">'4 - SVGA 1024x768 256 colores'</font><font color="#000080">);
    </font>Writeln <font color="#000080">(</font><font color="#800000">'5 - EGA 640x350 16 colores'</font><font color="#000080">);
    </font>Writeln <font color="#000080">(</font><font color="#800000">'6 - Hercules mono'</font><font color="#000080">);
    </font>err<font color="#000080">:=-</font><font color="#800000">1</font><font color="#000080">;
    </font><font color="#FF0000"><b>Repeat
      </b></font>ch<font color="#000080">:=</font>readkey<font color="#000080">;
      </font><font color="#FF0000"><b>case </b></font>ch <font color="#FF0000"><b>of
      </b></font><font color="#800000">'1' </font><font color="#000080">: </font><font color="#FF0000"><b>begin </b></font>v<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">; </font>modo_grafico<font color="#000080">:=</font>vga320x200x256<font color="#000080">;  </font>err<font color="#000080">:=</font>inicializa_svga<font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#800000">'2' </font><font color="#000080">: </font><font color="#FF0000"><b>begin </b></font>v<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">; </font>modo_grafico<font color="#000080">:=</font>svga640x400x256<font color="#000080">; </font>err<font color="#000080">:=</font>inicializa_svga<font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#800000">'3' </font><font color="#000080">: </font><font color="#FF0000"><b>begin </b></font>v<font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">; </font>modo_grafico<font color="#000080">:=</font>svga640x480x256<font color="#000080">; </font>err<font color="#000080">:=</font>inicializa_svga<font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#800000">'4' </font><font color="#000080">: </font><font color="#FF0000"><b>begin </b></font>v<font color="#000080">:=</font><font color="#800000">3</font><font color="#000080">; </font>modo_grafico<font color="#000080">:=</font>svga1024x768x256<font color="#000080">;</font>err<font color="#000080">:=</font>inicializa_svga<font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
      </font><font color="#800000">'5' </font><font color="#000080">: </font>egadriver<font color="#000080">;
      </font><font color="#800000">'6' </font><font color="#000080">: </font>hercules<font color="#000080">;
      </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
    </font><font color="#FF0000"><b>Until </b></font><font color="#000080">(</font>err<font color="#000080">=</font>grOk<font color="#000080">);
   </font><font color="#FF0000"><b>end
  else
   begin
    if </b></font><font color="#000080">(</font>modo_grafico<font color="#000080">=</font>ega640x350x16<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>egadriver
    <font color="#FF0000"><b>else
    if </b></font><font color="#000080">(</font>modo_grafico<font color="#000080">=</font>herc720x348x2<font color="#000080">) </font><font color="#FF0000"><b>then </b></font>hercules
    <font color="#FF0000"><b>else
    if </b></font><font color="#000080">(</font>modo_grafico<font color="#000080">=</font>vga320x200x256<font color="#000080">) </font><font color="#FF0000"><b>then
         begin </b></font>v<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;</font>err<font color="#000080">:=</font>inicializa_svga<font color="#000080">; </font><font color="#FF0000"><b>end
    else
    if </b></font><font color="#000080">(</font>modo_grafico<font color="#000080">=</font>svga640x400x256<font color="#000080">) </font><font color="#FF0000"><b>then
         begin </b></font>v<font color="#000080">:=</font><font color="#800000">1</font><font color="#000080">;</font>err<font color="#000080">:=</font>inicializa_svga<font color="#000080">; </font><font color="#FF0000"><b>end
    else
    if </b></font><font color="#000080">(</font>modo_grafico<font color="#000080">=</font>svga640x480x256<font color="#000080">) </font><font color="#FF0000"><b>then
         begin </b></font>v<font color="#000080">:=</font><font color="#800000">2</font><font color="#000080">; </font>err<font color="#000080">:=</font>inicializa_svga<font color="#000080">; </font><font color="#FF0000"><b>end
    else
    if </b></font><font color="#000080">(</font>modo_grafico<font color="#000080">=</font>svga1024x768x256<font color="#000080">) </font><font color="#FF0000"><b>then
         begin </b></font>v<font color="#000080">:=</font><font color="#800000">3</font><font color="#000080">;</font>err<font color="#000080">:=</font>inicializa_svga<font color="#000080">; </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>Procedure </b></font>dimensiones <font color="#000080">(</font><font color="#FF0000"><b>Var </b></font>horizontal<font color="#000080">, </font>vertical<font color="#000080">: </font>INTEGER<font color="#000080">);
</font><font color="#FF0000"><b>begin
  </b></font>horizontal<font color="#000080">:=</font>Getmaxx<font color="#000080">;
  </font>vertical<font color="#000080">:=</font>Getmaxy<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
  </b></font>PathToDriver <font color="#000080">:= </font><font color="#800000">'D:\bp\bgi'</font><font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.


</font><font color="#008000"><i>{ --------------------------   DEMO  -----------------------  }
</i></font><font color="#FF0000"><b>Program </b></font>DemoLCD<font color="#000080">;
</font><font color="#008000"><i>{
   Demo for LCD unit, keeps drawing ellipses until a key is pressed.
   There's a LCD that counts the number of ellipses drawn.

   Leopoldo Salvo, e-mail a900040@zipi.fi.upm.es
}
</i></font><font color="#FF0000"><b>Uses </b></font>Inisvga<font color="#000080">,</font>Crt<font color="#000080">,</font>Graph<font color="#000080">,</font>Lcd<font color="#000080">;  </font><font color="#008000"><i>{ unit INISVGA found at the bottom !! }

</i></font><font color="#FF0000"><b>Var
  </b></font>i<font color="#000080">, </font>numero<font color="#000080">:</font>word<font color="#000080">;
  </font>xq<font color="#000080">,</font>yq<font color="#000080">,</font>rx<font color="#000080">,</font>ry<font color="#000080">,</font>x<font color="#000080">,</font>y<font color="#000080">,</font>maxcolor<font color="#000080">,</font>maxx<font color="#000080">,</font>maxy<font color="#000080">:</font>integer<font color="#000080">;
  </font>n_str<font color="#000080">: </font><font color="#FF0000"><b>string</b></font><font color="#000080">;
  </font>graphdriver<font color="#000080">,</font>graphmode<font color="#000080">,</font>error<font color="#000080">:</font>integeR<font color="#000080">;
  </font>v1 <font color="#000080">: ^</font>Display<font color="#000080">;
  </font>ch <font color="#000080">: </font>char<font color="#000080">;
</font><font color="#FF0000"><b>begin
   </b></font>graficos <font color="#000080">(</font>edit<font color="#000080">);
   </font>maxcolor<font color="#000080">:=</font><font color="#800000">256</font><font color="#000080">;</font>maxx<font color="#000080">:=</font>getmaxx<font color="#000080">;</font>maxy<font color="#000080">:=</font>getmaxy<font color="#000080">;</font>numero<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
   </font>xq<font color="#000080">:=</font>maxx <font color="#FF0000"><b>div </b></font><font color="#800000">6</font><font color="#000080">;
   </font>yq<font color="#000080">:=</font>maxy <font color="#FF0000"><b>div </b></font><font color="#800000">10</font><font color="#000080">;  </font><font color="#008000"><i>{constants for centering stuff}
   </i></font>new <font color="#000080">(</font>v1<font color="#000080">, </font>init <font color="#000080">(</font>xq<font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">*</font>xq<font color="#000080">,</font><font color="#800000">2</font><font color="#000080">*</font>yq<font color="#000080">,</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">15</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">));
   </font><font color="#008000"><i>{creates and initializes lcd display, digits are white(#15) over black(#0) background}
   </i></font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>v1<font color="#000080">=</font><font color="#FF0000"><b>NIL</b></font><font color="#000080">) </font><font color="#FF0000"><b>then
    begin
     </b></font>writeln <font color="#000080">(</font><font color="#800000">'Error creating lcd displays, exiting...'</font><font color="#000080">);
     </font>halt<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
   </font>maxx<font color="#000080">:=</font>maxx<font color="#000080">-</font><font color="#800000">2</font><font color="#000080">*</font>xq<font color="#000080">;
   </font>maxy<font color="#000080">:=</font>maxy<font color="#000080">-</font><font color="#800000">4</font><font color="#000080">*</font>yq<font color="#000080">;
   </font>setcolor <font color="#000080">(</font><font color="#800000">15</font><font color="#000080">);
   </font>line <font color="#000080">(</font>xq<font color="#000080">-</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">*</font>yq<font color="#000080">-</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">*</font>xq<font color="#000080">+</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">*</font>yq<font color="#000080">-</font><font color="#800000">4</font><font color="#000080">);
   </font>line <font color="#000080">(</font><font color="#800000">5</font><font color="#000080">*</font>xq<font color="#000080">+</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">*</font>yq<font color="#000080">-</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">*</font>xq<font color="#000080">+</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">9</font><font color="#000080">*</font>yq<font color="#000080">+</font><font color="#800000">10</font><font color="#000080">);
   </font>line <font color="#000080">(</font><font color="#800000">5</font><font color="#000080">*</font>xq<font color="#000080">+</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">9</font><font color="#000080">*</font>yq<font color="#000080">+</font><font color="#800000">10</font><font color="#000080">,</font>xq<font color="#000080">-</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">9</font><font color="#000080">*</font>yq<font color="#000080">+</font><font color="#800000">10</font><font color="#000080">);
   </font>line <font color="#000080">(</font>xq<font color="#000080">-</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">9</font><font color="#000080">*</font>yq<font color="#000080">+</font><font color="#800000">10</font><font color="#000080">,</font>xq<font color="#000080">-</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">*</font>yq<font color="#000080">-</font><font color="#800000">4</font><font color="#000080">);
   </font><font color="#FF0000"><b>repeat
     </b></font>setcolor <font color="#000080">(</font>maxcolor<font color="#000080">+</font><font color="#800000">1</font><font color="#000080">);
     </font>x<font color="#000080">:=</font>random<font color="#000080">(</font>maxx<font color="#000080">);
     </font>y<font color="#000080">:=</font>random<font color="#000080">(</font>maxy<font color="#000080">);
     </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>x<font color="#000080">&lt;</font>maxx <font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>rx<font color="#000080">:=</font>random<font color="#000080">(</font>x<font color="#000080">)
</font>     		       <font color="#FF0000"><b>else </b></font>rx<font color="#000080">:=</font>random<font color="#000080">(</font>maxx<font color="#000080">-</font>x<font color="#000080">);
     </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>y<font color="#000080">&lt;</font>maxy <font color="#FF0000"><b>div </b></font><font color="#800000">2</font><font color="#000080">) </font><font color="#FF0000"><b>then </b></font>ry<font color="#000080">:=</font>random<font color="#000080">(</font>y<font color="#000080">)
</font>     		       <font color="#FF0000"><b>else </b></font>ry<font color="#000080">:=</font>random<font color="#000080">(</font>maxy<font color="#000080">-</font>y<font color="#000080">);
     </font>setfillstyle <font color="#000080">(</font>solidfill<font color="#000080">,</font>random<font color="#000080">(</font>maxcolor<font color="#000080">));
     </font>fillellipse <font color="#000080">(</font>xq<font color="#000080">+</font>x<font color="#000080">,</font><font color="#800000">3</font><font color="#000080">*</font>yq<font color="#000080">+</font>y<font color="#000080">,</font>rx<font color="#000080">,</font>ry<font color="#000080">);
     </font>inc<font color="#000080">(</font>numero<font color="#000080">);
     </font>v1<font color="#000080">^.</font>display_real <font color="#000080">(</font><font color="#800000">0</font><font color="#000080">, </font>numero<font color="#000080">);               </font><font color="#008000"><i>{updates counter lcd}
   </i></font><font color="#FF0000"><b>until </b></font>keypressed<font color="#000080">;
   </font>dispose <font color="#000080">(</font>v1<font color="#000080">, </font>done<font color="#000080">);
   </font>closegraph<font color="#000080">;
   </font>ch<font color="#000080">:=</font>readkey<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.

</font><font color="#008000"><i>{ --------------------------   DEMO  -----------------------  }

{
Demo for LCD unit.

Leopoldo Salvo Massieu, e-mail a900040@zipi.fi.upm.es

A rather artistic lcd display show.
}

</i></font><font color="#FF0000"><b>Program </b></font>demolcd3<font color="#000080">;

</font><font color="#FF0000"><b>uses </b></font>crt<font color="#000080">,</font>graph<font color="#000080">,</font>lcd<font color="#000080">;
</font><font color="#FF0000"><b>var
  </b></font>graphdriver<font color="#000080">,</font>graphmode<font color="#000080">,</font>err<font color="#000080">:</font>integer<font color="#000080">;
  </font>a<font color="#000080">:</font>byte<font color="#000080">;
  </font>rx<font color="#000080">,</font>ry<font color="#000080">:</font>real<font color="#000080">;
  </font>maxcol<font color="#000080">,</font>c<font color="#000080">: </font>byte<font color="#000080">;
  </font>s<font color="#000080">:</font><font color="#FF0000"><b>string</b></font><font color="#000080">;
  </font>v<font color="#000080">:</font><font color="#FF0000"><b>array</b></font><font color="#000080">[</font><font color="#800000">1</font><font color="#000080">..</font><font color="#800000">6</font><font color="#000080">] </font><font color="#FF0000"><b>of </b></font><font color="#000080">^</font>display<font color="#000080">;
</font><font color="#FF0000"><b>const
  </b></font>tiempo<font color="#000080">= </font><font color="#800000">350</font><font color="#000080">;

</font><font color="#FF0000"><b>procedure </b></font>abre <font color="#000080">(</font>xi<font color="#000080">,</font>yi<font color="#000080">,</font>xf<font color="#000080">,</font>yf<font color="#000080">,</font>n<font color="#000080">,</font>c1<font color="#000080">,</font>c0<font color="#000080">,</font>w<font color="#000080">:</font>byte<font color="#000080">);
</font><font color="#FF0000"><b>begin
   </b></font>new <font color="#000080">(</font>v<font color="#000080">[</font>w<font color="#000080">], </font>init <font color="#000080">(</font>round<font color="#000080">(</font>xi<font color="#000080">*</font>rx<font color="#000080">),</font>round<font color="#000080">(</font>yi<font color="#000080">*</font>ry<font color="#000080">),</font>round<font color="#000080">(</font>xf<font color="#000080">*</font>rx<font color="#000080">),</font>round<font color="#000080">(</font>yf<font color="#000080">*</font>ry<font color="#000080">),</font>n<font color="#000080">,</font>c1<font color="#000080">,</font>c0<font color="#000080">));
   </font><font color="#FF0000"><b>if </b></font><font color="#000080">(</font>v<font color="#000080">[</font>w<font color="#000080">]=</font><font color="#FF0000"><b>NIL</b></font><font color="#000080">) </font><font color="#FF0000"><b>then
    begin
      </b></font>writeln <font color="#000080">(</font><font color="#800000">'Error creating lcd display... halting program...'</font><font color="#000080">);
      </font>halt<font color="#000080">;
    </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
</font><font color="#FF0000"><b>enD</b></font><font color="#000080">;
</font><font color="#FF0000"><b>procedure </b></font>pon <font color="#000080">(</font>num<font color="#000080">:</font>byte<font color="#000080">);
</font><font color="#FF0000"><b>begin
   </b></font>v<font color="#000080">[</font>num<font color="#000080">]^.</font>display_string <font color="#000080">(</font>char<font color="#000080">(</font><font color="#800000">48</font><font color="#000080">+</font>num<font color="#000080">));
   </font>delay <font color="#000080">(</font>tiempo<font color="#000080">);
   </font>v<font color="#000080">[</font>num<font color="#000080">]^.</font>display_string <font color="#000080">(</font><font color="#800000">' '</font><font color="#000080">);
</font><font color="#FF0000"><b>end</b></font><font color="#000080">;

</font><font color="#FF0000"><b>begin
   </b></font>graphdriver<font color="#000080">:=</font>detect<font color="#000080">;
   </font>graphmode<font color="#000080">:=</font><font color="#800000">0</font><font color="#000080">;
   </font>initgraph <font color="#000080">(</font>graphdriver<font color="#000080">,</font>graphmode<font color="#000080">,</font><font color="#800000">''</font><font color="#000080">);
   </font>err<font color="#000080">:=</font>graphresult<font color="#000080">;
   </font><font color="#FF0000"><b>if </b></font>err<font color="#000080">&lt;&gt;</font>grok <font color="#FF0000"><b>then
       begin
        </b></font>writeln <font color="#000080">(</font><font color="#800000">'had trouble opening graphic mode (probably egavga.bgi not found)'</font><font color="#000080">,</font>grapherrormsg<font color="#000080">(</font>err<font color="#000080">));
        </font>exit<font color="#000080">;
       </font><font color="#FF0000"><b>end</b></font><font color="#000080">;
  </font>rx<font color="#000080">:=</font>getmaxx<font color="#000080">*</font><font color="#800000">0.01</font><font color="#000080">;
  </font>ry<font color="#000080">:=</font>getmaxy<font color="#000080">*</font><font color="#800000">0.01</font><font color="#000080">;
  </font>maxcol<font color="#000080">:=</font>getmaxcolor<font color="#000080">;

  </font>Abre <font color="#000080">(</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">20</font><font color="#000080">,</font><font color="#800000">25</font><font color="#000080">,</font><font color="#800000">40</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">30</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">);
  </font>Abre <font color="#000080">(</font><font color="#800000">43</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">,</font><font color="#800000">77</font><font color="#000080">,</font><font color="#800000">18</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">25</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">2</font><font color="#000080">);
  </font>Abre <font color="#000080">(</font><font color="#800000">85</font><font color="#000080">,</font><font color="#800000">25</font><font color="#000080">,</font><font color="#800000">100</font><font color="#000080">,</font><font color="#800000">75</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">23</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">3</font><font color="#000080">);
  </font>Abre <font color="#000080">(</font><font color="#800000">72</font><font color="#000080">,</font><font color="#800000">60</font><font color="#000080">,</font><font color="#800000">93</font><font color="#000080">,</font><font color="#800000">81</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">4</font><font color="#000080">);
  </font>Abre <font color="#000080">(</font><font color="#800000">36</font><font color="#000080">,</font><font color="#800000">69</font><font color="#000080">,</font><font color="#800000">72</font><font color="#000080">,</font><font color="#800000">85</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">56</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">5</font><font color="#000080">);
  </font>Abre <font color="#000080">(</font><font color="#800000">12</font><font color="#000080">,</font><font color="#800000">44</font><font color="#000080">,</font><font color="#800000">36</font><font color="#000080">,</font><font color="#800000">75</font><font color="#000080">,</font><font color="#800000">1</font><font color="#000080">,</font><font color="#800000">98</font><font color="#000080">,</font><font color="#800000">0</font><font color="#000080">,</font><font color="#800000">6</font><font color="#000080">);
  </font><font color="#FF0000"><b>Repeat
    for </b></font>a<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">6 </font><font color="#FF0000"><b>do </b></font>pon <font color="#000080">(</font>a<font color="#000080">);
    </font><font color="#FF0000"><b>Until </b></font>keypressed<font color="#000080">;
  </font><font color="#FF0000"><b>for </b></font>a<font color="#000080">:=</font><font color="#800000">1 </font><font color="#FF0000"><b>to </b></font><font color="#800000">6 </font><font color="#FF0000"><b>do </b></font>dispose <font color="#000080">(</font>v<font color="#000080">[</font>a<font color="#000080">], </font>done<font color="#000080">);
  </font>closegraph<font color="#000080">;
</font><font color="#FF0000"><b>end</b></font><font color="#000080">.
</font>
</code></pre><!--EndFragment--><p align="center"><b>[</b><a href="index.html">Back to GRAPHICS SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="../index.html">Back to Main SWAG index</a><b>]</b>&nbsp;&nbsp;<b>[</b><a href="0240.PAS">Original</a><b>]</b></p></body>
</html>
